@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom styles */
@layer base {
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html {
    scroll-behavior: smooth;
    scroll-padding-top: 80px;
    /* Force GPU acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  body {
    @apply bg-dark text-white transition-colors duration-500;
    font-family: 'Montserrat', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    overflow-x: hidden;
    /* Performance optimizations */
    -webkit-overflow-scrolling: touch;
    text-rendering: optimizeSpeed;
  }
  
  /* Headings use Montserrat with tighter tracking */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Montserrat', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    letter-spacing: -0.02em;
  }
  
  html.light body {
    @apply bg-gray-50 text-gray-900;
  }
}

@layer utilities {
  .font-montserrat {
    font-family: 'Montserrat', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  }

  .text-gradient {
    @apply bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 bg-clip-text text-transparent;
    will-change: background-position;
  }

  .display-hero {
    font-family: 'Montserrat', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    letter-spacing: -0.02em;
  }
  
  html.light .text-gradient {
    @apply bg-gradient-to-r from-purple-700 via-purple-600 to-pink-600 bg-clip-text text-transparent;
  }
  
  .glass-effect {
    @apply bg-white bg-opacity-10 backdrop-blur-lg border border-white border-opacity-20;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  .liquid-glass {
    @apply relative overflow-hidden;
    background: rgba(139, 92, 246, 0.1);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(139, 92, 246, 0.2);
    box-shadow: 
      0 8px 32px 0 rgba(139, 92, 246, 0.15),
      inset 0 0 0 1px rgba(255, 255, 255, 0.1);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  .liquid-glass::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(
      circle,
      rgba(168, 85, 247, 0.2) 0%,
      transparent 70%
    );
    animation: liquid 8s ease-in-out infinite;
    pointer-events: none;
    will-change: transform;
  }
  
  .hover-lift {
    transition: transform 0.3s ease-out;
    will-change: transform;
    transform: translateZ(0);
  }
  
  .hover-lift:hover {
    transform: translateY(-0.5rem) translateZ(0);
  }
  
  /* Smooth scroll snap for sections */
  section {
    scroll-margin-top: 80px;
    contain: layout style paint;
  }
  
  /* GPU-accelerated transforms */
  img, svg, canvas {
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    image-rendering: -webkit-optimize-contrast;
  }
  
  /* Performance optimizations for animations */
  @keyframes liquid {
    0%, 100% {
      transform: translate(0%, 0%) rotate(0deg);
    }
    33% {
      transform: translate(30%, -30%) rotate(120deg);
    }
    66% {
      transform: translate(-20%, 20%) rotate(240deg);
    }
  }
  
  /* Reduce motion for pseudo-elements */
  .liquid-glass::before {
    contain: strict;
  }
  
  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
  
  /* Cross-browser compatibility fixes */
  
  /* Safari-specific fixes */
  @supports (-webkit-touch-callout: none) {
    body {
      /* Fix for Safari elastic scrolling */
      position: fixed;
      width: 100%;
      height: 100%;
      overflow-y: scroll;
      -webkit-overflow-scrolling: touch;
    }
    
    #root {
      min-height: 100vh;
    }
  }
  
  /* Firefox-specific optimizations */
  @-moz-document url-prefix() {
    * {
      scrollbar-width: thin;
      scrollbar-color: #7c3aed transparent;
    }
  }
  
  /* Prevent pull-to-refresh on mobile */
  html, body {
    overscroll-behavior-y: contain;
    -webkit-overscroll-behavior-y: contain;
  }
  
  /* Fix for iOS input zoom */
  @media (max-width: 768px) {
    input, textarea, select {
      font-size: 16px !important;
    }
  }
  
  /* Prevent text selection on interactive elements */
  button, a, .cursor-pointer {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
    -webkit-user-select: none;
  }
}

